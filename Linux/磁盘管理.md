# 磁盘管理

## 挂载命令

```
$ mount /dev/cdrom /mnt/cdrom     # 挂载光盘至这个新的目录
$ ls /mnt/cdrom                   # 现在可以通过目录/mnt/cdrom/访问这个光盘了
$ cd /                            # 退出/mnt/cdrom目录
$ umount /dev/cdrom               # 卸载光盘
```

ps：卸载光盘前必须先退出光盘所挂载的目录，这里是/mnt/cdrom



## Linux下设备的表示方法

Linux下的所有设备都被当作文件来操作，每个设备都被映射为一个特殊文件“设备文件”。所有的设备文件都在  /dev/  目录下。这些文件大部分是块设备文件和字符设备文件。

用户不能直接通过设备文件访问存储设备，所有的存储设备（包括硬盘、光盘等）在使用之前必须先挂载到一个目录下，然后就可以想操作目录一样使用这个存储设备。



## 启动时挂载文件系统

Linux通过配置文件 /etc/fstab 来确定开机时需要挂载的分区。



## 查看磁盘使用情况：df

df命令会收集和整理当前已经挂载的全部文件系统的一些重要的统计数据。

```
root@kali:~# df
Filesystem     1K-blocks     Used Available Use% Mounted on
udev             1007416        0   1007416   0% /dev
tmpfs             204320     9444    194876   5% /run
/dev/sda1       29526092 11953824  16049376  43% /
tmpfs            1021592      384   1021208   1% /dev/shm
tmpfs               5120        0      5120   0% /run/lock
tmpfs            1021592        0   1021592   0% /sys/fs/cgroup
tmpfs             204316       16    204300   1% /run/user/133
tmpfs             204316       36    204280   1% /run/user/0
```

df命令显示的信息非常完整，如：/dev/sda1 被挂载到根目录下，其容量为29G，已用12G，占容量的43%，剩余空间为16G。



## 压缩工具

### 压缩文件：gzip

在gzip命令后跟一个要压缩的文件作为参数即可。默认会给被压缩的文件加一个gz的扩展名。

gunzip 命令用来解压缩。

-l 选项用于查看压缩效果。

-t 选项用于测试压缩文件的完整性。如果文件正常，gzip不会给出任何提示。



### 更高的压缩率：bzip2

bzip2 的使用方法同gzip基本一致。



## 文件打包：tar

```
$ tar -cvf shell.tar shell/
```

这里有3个选项：c指导tar创建归档文件，v用于显示命令的执行过程，f用于指定归档文件的文件名，这里设为shell.bar。

和gzip不同的是，tar不会删除原来的文件。

要解开.tar 文件，把-c换成-x（表示解开归档文件），就可以了。

-w选项用于每次将单个文件加入或抽出归档文件是征求用户的意见。

-z选项，自动调用gzip程序完成相关操作。创建文档时，tar程序在最后调用gzip压缩归档文件；解开归档文件是，tar程序先调用gunzip解压缩，然后在解开被gzip处理过的.tar文件。



## 转移文件：dd

dd命令使用if选项指定输入端的文件系统，of选项指定输出端。

下面这条命令将一张cd完整地转存储为ISO镜像文件

```
$ dd if=/dev/cdrom of=cd.iso
```

dd 命令也可以在两个大小完全相同的分区或是磁带之间复制文件系统，但如果使用不当，可能会破坏分区信息，一般不推荐这样做。



## 安装硬盘和分区：fdisk



## 备份文件系统：dump



## 恢复：restore

